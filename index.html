<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Random Integer Generator with Histogram</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            margin-top: 20px;
        }
        input, button {
            margin: 5px;
            padding: 10px;
        }
        #histogram-container {
            margin-top: 30px;
            display: flex;
            justify-content: center;
        }
        #histogram {
            width: 33.33vw;
            height: calc(33.33vw * 0.8);
            border: 1px solid black;
            position: relative;
            display: flex;
            justify-content: space-around;
            align-items: flex-end; /* Bars grow upwards */
        }
        .histogram-bar {
            background-color: orange;
            width: 20px;
            margin: 2px;
            display: inline-block;
            vertical-align: bottom;
        }
        #x-axis {
            display: flex;
            justify-content: space-around;
            margin-top: 10px;
        }
        #y-axis {
            position: absolute;
            left: -30px;
            bottom: 0;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            height: 100%;
        }
        #counter {
            margin-top: 10px;
            font-size: 18px;
            color: #333;
        }
        button {
            cursor: pointer;
        }
    </style>
</head>
<body>

    <h1>Random Integer Generator with Histogram</h1>
    <p>Enter a range to generate a random number:</p>

    <input type="number" id="min" placeholder="Min Value" value="0">
    <input type="number" id="max" placeholder="Max Value" value="5">
    <button onclick="generateRandom()">Generate</button>
    <p id="result"></p>

    <div id="counter">Generated numbers: 0</div>

    <div id="histogram-container">
        <div id="histogram">
            <div id="y-axis"></div>
        </div>
    </div>
    <div id="x-axis"></div>

    <button onclick="resetHistogram()">Reset Histogram</button>

    <script>
        let counts = {};
        let totalGenerated = 0;
        let max_occurrences = 0;
        let currentMin = 0;
        let currentMax = 5;

        // Initialize histogram with default values for min and max (0 to 5)
        function initializeHistogram(min, max) {
            counts = {};
            totalGenerated = 0;
            max_occurrences = 0;
            document.getElementById('counter').textContent = `Generated numbers: ${totalGenerated}`;

            const xAxis = document.getElementById('x-axis');
            const yAxis = document.getElementById('y-axis');
            xAxis.innerHTML = ''; // Clear x-axis
            yAxis.innerHTML = ''; // Clear y-axis

            // Populate x-axis with bin labels for the range
            for (let i = min; i <= max; i++) {
                counts[i] = 0;
                const xLabel = document.createElement('div');
                xLabel.textContent = i;
                xAxis.appendChild(xLabel);
            }

            // Set y-axis from 0 to max occurrences
            for (let i = 0; i <= max_occurrences; i++) {
                const yLabel = document.createElement('div');
                yLabel.textContent = i;
                yAxis.appendChild(yLabel);
            }
        }

        // Function to generate a random number within the range
        function generateRandom() {
            const min = parseInt(document.getElementById('min').value);
            const max = parseInt(document.getElementById('max').value);

            // If the range has changed, reset the histogram
            if (min !== currentMin || max !== currentMax) {
                currentMin = min;
                currentMax = max;
                resetHistogram();
                initializeHistogram(min, max);
            }

            if (!isNaN(min) && !isNaN(max) && min <= max) {
                const randomInt = Math.floor(Math.random() * (max - min + 1)) + min;
                document.getElementById('result').textContent = `Random Number: ${randomInt}`;
                updateHistogram(randomInt, min, max);
            } else {
                document.getElementById('result').textContent = "Please enter valid numbers.";
            }
        }

        // Function to update the histogram
        function updateHistogram(randomInt, min, max) {
            totalGenerated++;
            document.getElementById('counter').textContent = `Generated numbers: ${totalGenerated}`;

            counts[randomInt]++;
            if (counts[randomInt] > max_occurrences) {
                max_occurrences = counts[randomInt];
            }
            renderHistogram(min, max);
        }

        // Render the histogram after each update
        function renderHistogram(min, max) {
            const histogramDiv = document.getElementById('histogram');
            histogramDiv.innerHTML = ''; // Clear previous histogram bars

            // Update y-axis (left) for the max occurrences
            const yAxis = document.getElementById('y-axis');
            yAxis.innerHTML = ''; // Clear y-axis
            for (let i = 0; i <= max_occurrences; i++) {
                const yLabel = document.createElement('div');
                yLabel.textContent = i;
                yAxis.appendChild(yLabel);
            }

            // Create histogram bars based on updated counts
            for (let i = min; i <= max; i++) {
                const count = counts[i] || 0; // Get count, default to 0
                const bar = document.createElement('div');
                bar.className = 'histogram-bar';
                bar.style.height = `${(count / max_occurrences) * 100}%`; // Scale height relative to max occurrences
                histogramDiv.appendChild(bar);
            }
        }

        // Function to reset the histogram and counter
        function resetHistogram() {
            totalGenerated = 0;
            max_occurrences = 0;
            document.getElementById('counter').textContent = `Generated numbers: 0`;
            const histogramDiv = document.getElementById('histogram');
            histogramDiv.innerHTML = ''; // Clear histogram bars
            document.getElementById('x-axis').innerHTML = ''; // Clear x-axis
            document.getElementById('y-axis').innerHTML = ''; // Clear y-axis
        }

        // Initialize default histogram for range 0-5 on page load
        window.onload = function() {
            initializeHistogram(0, 5);
        };
    </script>

</body>
</html>
